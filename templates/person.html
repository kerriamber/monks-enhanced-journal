<form class="flexcol journal-subsheet person-container {{entrytype}}" editable="{{editable}}">
    <img class="fullscreen-image" src="{{data.img}}" />
    <header class="sheet-header journal-header flexrow">
        <div class="sheet-image">
            <img class="profile" src="{{data.img}}" data-edit="img" onerror="this.src='modules/monks-enhanced-journal/assets/person.png'">
        </div>
        <section class="header-details">
            <h1 class="personname flexrow">
                <i class="fas fa-user sheet-icon"></i>
                <input name="name" type="text" value="{{data.name}}" placeholder="{{localize 'MonksEnhancedJournal.PersonName'}}">
            </h1>
            <div class="form-group">
                <label>{{localize 'MonksEnhancedJournal.Role'}}</label>
                <input type="text" name="flags.monks-enhanced-journal.role" placeholder="{{localize 'MonksEnhancedJournal.Role'}}" value="{{data.flags.monks-enhanced-journal.role}}" />
            </div>
            <div class="form-group">
                <label>{{localize 'MonksEnhancedJournal.Location'}}</label>
                <input type="text" name="flags.monks-enhanced-journal.location" placeholder="{{localize 'MonksEnhancedJournal.Location'}}" value="{{data.flags.monks-enhanced-journal.location}}" />
            </div>
        </section>
        {{#if data.flags.monks-enhanced-journal.actor}}
        <div class="actor-img">
            <div class="person-actor">{{localize 'MonksEnhancedJournal.Actor'}}</div>
            <img src="{{data.flags.monks-enhanced-journal.actor.img}}" data-id="{{data.flags.monks-enhanced-journal.actor.id}}" data-entity="Actor" onerror="$(this).hide();">
            <div style="text-align: center;">{{data.flags.monks-enhanced-journal.actor.name}}</div>
        </div>
        {{/if}}
    </header>
    <nav class="sheet-navigation tabs" data-group="primary">
        <a class="item" data-tab="description">{{localize 'MonksEnhancedJournal.Description'}}</a>
        <a class="item" data-tab="details">{{localize 'MonksEnhancedJournal.Details'}}</a>
        <a class="item" data-tab="relationships">{{localize 'MonksEnhancedJournal.Relationships'}}</a>
        <a class="item" data-tab="notes">{{localize 'MonksEnhancedJournal.Notes'}}</a>
    </nav>
    <section class="sheet-body">
        <div class="tab description flexcol" data-group="primary" data-tab="description">
            {{editor target="content" content=data.content editable=true button=true owner=owner}}
        </div>
        <div class="tab details flexcol" data-group="primary" data-tab="details">
            <div class="details flexrow" style="border-bottom: 2px groove #eeede0;">
                <div class="entity-details">
                    <ul>
                        <li {{#unless fields.race.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Race'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.race" value="{{data.flags.monks-enhanced-journal.race}}" />
                        </li>
                        <li {{#unless fields.gender.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Gender'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.gender" value="{{data.flags.monks-enhanced-journal.gender}}" />
                        </li>
                        <li {{#unless fields.pronouns.value}} style="display: none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Pronouns}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.pronouns" value="{{data.flags.monks-enhanced-journal.pronouns}}" />
                        </li>
                        <li {{#unless fields.age.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Age'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.age" value="{{data.flags.monks-enhanced-journal.age}}" />
                        </li>
                        <li {{#unless fields.eyes.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Eyes'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.eyes" value="{{data.flags.monks-enhanced-journal.eyes}}" />
                        </li>
                        <li {{#unless fields.skin.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Skin'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.skin" value="{{data.flags.monks-enhanced-journal.skin}}" />
                        </li>
                        <li {{#unless fields.hair.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Hair'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.hair" value="{{data.flags.monks-enhanced-journal.hair}}" />
                        </li>
                        <li {{#unless fields.profession.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Profession'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.profession" value="{{data.flags.monks-enhanced-journal.profession}}" />
                        </li>
                        <li {{#unless fields.voice.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Voice'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.voice" value="{{data.flags.monks-enhanced-journal.voice}}" />
                        </li>
                        <li {{#unless fields.faction.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Faction'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.faction" value="{{data.flags.monks-enhanced-journal.faction}}" />
                        </li>
                        <li {{#unless fields.height.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Height'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.height" value="{{data.flags.monks-enhanced-journal.height}}" />
                        </li>
                        <li {{#unless fields.weight.value}} style="display:none;" {{/unless}}>
                            <label>{{localize 'MonksEnhancedJournal.Weight'}}</label>
                            <input type="text" name="flags.monks-enhanced-journal.weight" value="{{data.flags.monks-enhanced-journal.weight}}" />
                        </li>
                    </ul>
                </div>
            </div>
            <div class="details flexcol" style="border-bottom: 2px groove #eeede0;">
                <div class="form-group" {{#unless fields.traits.value}} style="display:none;" {{/unless}}>
                    <label>{{localize 'MonksEnhancedJournal.Traits'}}</label>
                    <textarea name="flags.monks-enhanced-journal.traits">{{data.flags.monks-enhanced-journal.traits}}</textarea>
                </div>
                <div class="form-group" {{#unless fields.ideals.value}} style="display:none;" {{/unless}}>
                    <label>{{localize 'MonksEnhancedJournal.Ideals'}}</label>
                    <textarea name="flags.monks-enhanced-journal.ideals">{{data.flags.monks-enhanced-journal.ideals}}</textarea>
                </div>
                <div class="form-group" {{#unless fields.bonds.value}} style="display:none;" {{/unless}}>
                    <label>{{localize 'MonksEnhancedJournal.Bonds'}}</label>
                    <textarea name="flags.monks-enhanced-journal.bonds">{{data.flags.monks-enhanced-journal.bonds}}</textarea>
                </div>
                <div class="form-group" {{#unless fields.flaws.value}} style="display:none;" {{/unless}}>
                    <label>{{localize 'MonksEnhancedJournal.Flaws'}}</label>
                    <textarea name="flags.monks-enhanced-journal.flaws">{{data.flags.monks-enhanced-journal.flaws}}</textarea>
                </div>
                <div class="form-group" {{#unless fields.longterm.value}} style="display:none;" {{/unless}}>
                    <label>{{localize 'MonksEnhancedJournal.LongTermGoal'}}</label>
                    <textarea name="flags.monks-enhanced-journal.longterm">{{data.flags.monks-enhanced-journal.longterm}}</textarea>
                </div>
                <div class="form-group" {{#unless fields.shirtterm.value}} style="display:none;" {{/unless}}>
                    <label>{{localize 'MonksEnhancedJournal.ShortTermGoal'}}</label>
                    <textarea name="flags.monks-enhanced-journal.shortterm">{{data.flags.monks-enhanced-journal.shortterm}}</textarea>
                </div>
                <div class="form-group" {{#unless fields.beliefs.value}} style="display:none;" {{/unless}}>
                    <label>{{localize 'MonksEnhancedJournal.Beliefs'}}</label>
                    <textarea name="flags.monks-enhanced-journal.beliefs">{{data.flags.monks-enhanced-journal.beliefs}}</textarea>
                </div>
                <div class="form-group" {{#unless fields.secret.value}} style="display:none;" {{/unless}}>
                    <label>{{localize 'MonksEnhancedJournal.Secret'}}</label>
                    <textarea name="flags.monks-enhanced-journal.secret">{{data.flags.monks-enhanced-journal.secret}}</textarea>
                </div>
            </div>
        </div>
        <div class="tab notes flexcol" data-group="primary" data-tab="relationships">
            <div class="relationships flexrow">
                <ul class="items-list">
                    {{#each relationships}}
                    <li class="items-header flexrow">
                        <h3 class="item-name flexrow">{{this.name}}</h3>
                        <h3 class="item-name flexrow">{{localize 'MonksEnhancedJournal.Relationship'}}</h3>
                        <div class="item-controls flexrow"></div>
                    </li>
                    {{#each actors}}
                    <li class="item flexrow" data-id="{{this.id}}" data-container="actors" data-entity="Actor" draggable="false">
                        <div class="item-name flexrow">
                            <img class="item-image actor-icon" src="{{this.img}}" onerror="this.src='modules/monks-enhanced-journal/assets/person.png'" />
                            <h4>{{this.name}}</h4>
                        </div>

                        <div class="item-name item-relationship flexrow">
                            <input type="text" class="item-field" name="relationship" value="{{this.relationship}}" />
                        </div>

                        <div class="item-controls flexrow owner">
                            <a class="item-control item-delete" title="{{localize 'MonksEnhancedJournal.RemoveActor'}}"><i class="fas fa-trash"></i></a>
                        </div>
                    </li>
                    {{/each}}
                    {{else}}
                    <li class="instruction">Drag a Person, Place, or Organization here to make a relationship</li>
                    {{/each}}
                </ul>
            </div>
        </div>
        <div class="tab notes flexcol" data-group="primary" data-tab="notes">
            <div style="flex: 0 0 20px;">{{localize 'MonksEnhancedJournal.OnlyViewable'}}</div>
            <div>
                <textarea name="flags.monks-enhanced-journal.{{userid}}.notes" style="width: calc(100% - 4px);height: calc(100% - 4px)">{{userdata.notes}}</textarea>
            </div>
        </div>
    </section>
</form>